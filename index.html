<html>
<head>
    <style>
      #controllers {
      	border: 1px solid #555;
      	padding: 10px;
      }
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map_canvas {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 90%;
        padding: 0;
      }
    </style>
</head>
<body>
	<div id="controllers">
		<label for="picker">House District</label>
		<select id="picker"></select>
		<button id="submit" disabled>Go!</button>
	</div>

	<div id="map_canvas"></div>
<script type="text/javascript">
  function initialize() {
  	let picker = document.getElementById('picker');
  	for (let i = 1; i <= 180; i++) {  // 180 house districts
  		let elt = document.createElement('option');
  		elt.value = i;
  		elt.innerText = i;
  		picker.appendChild(elt);
  	}

    let map = new google.maps.Map(document.getElementById("map_canvas"), {zoom: 10});

  	document.getElementById('submit').addEventListener('click', (e) => {
  		loadKmlLayer(map, 'house-district-' + picker.value + '.kmz')
  	})
  	document.getElementById('submit').disabled = false;
  }

  function loadKmlLayer(map, filename) {
    let src = 'https://storage.googleapis.com/georgia-maps/geo/' + filename;
  	let kmlLayer = new google.maps.KmlLayer(src, {
  	  suppressInfoWindows: false,
  	  preserveViewport: false,
  	  map: map
  	});
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUMPBbx8lwirJEHxvQF82pkEwjkSucUi0&callback=initialize" async defer></script>
</body>
</html>
